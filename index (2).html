<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HIDDEN_PATTERNS - Vektani Research Archive</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-default: #000000;
            --bg-surface: #0F0F0F;
            --bg-overlay: rgba(0, 0, 0, 0.95);
            --text-primary: #E5E5E5;
            --text-secondary: #808080;
            --text-inverse: #000000;
            --border-default: #262626;
            --accent-primary: #00CC66;
            --accent-dim: #009955;
            --font-mono: 'JetBrains Mono', monospace;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-default);
            color: var(--text-primary);
            font-family: var(--font-mono);
            overflow-x: hidden;
            line-height: 1.6;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-default);
            border-left: 1px solid var(--border-default);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-default);
        }

        #constellation-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .content-layer {
            position: relative;
            z-index: 2;
        }

        .hero-text-large {
            font-size: clamp(40px, 8vw, 120px);
            line-height: 0.9;
            letter-spacing: -0.04em;
            font-weight: 500;
            text-transform: uppercase;
        }

        .typing-cursor::after {
            content: '_';
            animation: blink 1s step-end infinite;
            color: var(--accent-primary);
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .category-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            padding: 32px;
            transition: all 200ms;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: block;
            color: inherit;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: var(--accent-primary);
            transition: left 300ms;
        }

        .category-card:hover::before {
            left: 0;
        }

        .category-card:hover {
            background: var(--bg-default);
            border-color: var(--accent-primary);
            transform: translateX(4px);
        }

        .category-title {
            font-size: 24px;
            color: var(--text-primary);
            margin-bottom: 8px;
            transition: color 200ms;
        }

        .category-card:hover .category-title {
            color: var(--accent-primary);
        }

        .article-card {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            padding: 32px;
            margin-bottom: 24px;
            transition: all 200ms;
            cursor: pointer;
        }

        .article-card:hover {
            border-color: var(--accent-primary);
            transform: translateX(4px);
        }

        .article-title {
            font-size: 24px;
            color: var(--text-primary);
            margin-bottom: 12px;
            transition: color 200ms;
        }

        .article-card:hover .article-title {
            color: var(--accent-primary);
        }

        .tag {
            background: var(--bg-default);
            border: 1px solid var(--border-default);
            color: var(--text-secondary);
            font-size: 11px;
            padding: 4px 12px;
            margin-right: 8px;
            margin-bottom: 8px;
            display: inline-block;
        }

        .btn {
            background: var(--bg-surface);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 14px;
            padding: 12px 24px;
            cursor: pointer;
            transition: all 150ms;
        }

        .btn:hover {
            background: var(--bg-default);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .btn-primary {
            background: var(--accent-primary);
            color: var(--text-inverse);
            border-color: var(--accent-primary);
        }

        .btn-primary:hover {
            background: transparent;
            color: var(--accent-primary);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: color 200ms;
            margin-bottom: 32px;
        }

        .back-link:hover {
            color: var(--accent-primary);
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            background: var(--bg-default);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 14px;
            padding: 12px;
        }

        .form-group textarea {
            min-height: 300px;
            resize: vertical;
        }
    </style>
</head>

<body>
    <canvas id="constellation-canvas"></canvas>

    <div class="content-layer">
        <!-- Navigation -->
        <nav
            style="position: fixed; top: 0; left: 0; right: 0; background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-default); padding: 16px 24px; z-index: 100; display: flex; justify-content: space-between; align-items: center;">
            <a href="#" onclick="showPage('home')"
                style="font-size: 14px; font-weight: 500; text-decoration: none; color: var(--text-primary);">HIDDEN_PATTERNS
                [v2.0]</a>
            <div style="display: flex; gap: 24px; font-size: 12px;">
                <a href="#categories" onclick="showPage('home')"
                    style="color: var(--text-secondary); text-decoration: none;">CATEGORIES</a>
                <a href="#" onclick="showPage('admin')"
                    style="color: var(--text-secondary); text-decoration: none;">ADMIN</a>
            </div>
        </nav>

        <!-- HOME PAGE -->
        <section id="home-page" class="page-section active">
            <div
                style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding-top: 80px;">
                <div style="text-align: center; padding: 0 24px;">
                    <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 24px;">> System_Online
                    </div>
                    <h1 class="hero-title hero-text-large" style="margin: 0 0 24px 0;">HIDDEN_PATTERNS</h1>
                    <p style="font-size: 16px; color: var(--text-secondary); max-width: 600px; margin: 0 auto; line-height: 1.6;"
                        class="typing-cursor">
                        Research. Analysis. Insight.
                    </p>
                    <div style="margin-top: 48px; font-size: 12px; color: var(--text-secondary);">
                        <div>Role: Research Analyst</div>
                        <div>Focus: Equity, Business, Branding, Lifestyle</div>
                        <div>Location: Orbit / Remote</div>
                    </div>
                </div>
            </div>

            <div id="categories" style="padding: 128px 24px;">
                <h2 style="font-size: 32px; margin-bottom: 48px; text-align: center;">Research_Categories</h2>

                <div
                    style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px;">

                    <a href="#" onclick="showCategory('equity_research')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">001</div>
                        <h3 class="category-title">Equity Research</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Investment frameworks, valuation
                            models, and stock analysis methodologies</p>
                    </a>

                    <a href="#" onclick="showCategory('business_cases')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">002</div>
                        <h3 class="category-title">Interesting Business Cases</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Strategic analysis of companies that
                            disrupted industries and built moats</p>
                    </a>

                    <a href="#" onclick="showCategory('branding_strategies')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">003</div>
                        <h3 class="category-title">Branding Strategies</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Brand positioning and marketing
                            strategies from world-class brands</p>
                    </a>

                    <a href="#" onclick="showCategory('psychology')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">004</div>
                        <h3 class="category-title">Psychology Research</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Behavioral economics, cognitive
                            biases, and decision-making frameworks</p>
                    </a>

                    <a href="#" onclick="showCategory('tennis')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">005</div>
                        <h3 class="category-title">Tennis</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Match analysis, player strategies, and
                            technique breakdowns</p>
                    </a>

                    <a href="#" onclick="showCategory('cars')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">006</div>
                        <h3 class="category-title">Luxury Cars</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Automotive design, engineering
                            excellence, and luxury vehicle business</p>
                    </a>

                    <a href="#" onclick="showCategory('communication')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">007</div>
                        <h3 class="category-title">Communication Research</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Rhetoric, persuasion techniques, and
                            mass media influence</p>
                    </a>

                    <a href="#" onclick="showCategory('company_research')" class="category-card">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">008</div>
                        <h3 class="category-title">Company Research</h3>
                        <p style="font-size: 14px; color: var(--text-secondary);">Corporate strategy analysis and
                            business model innovation</p>
                    </a>

                </div>
            </div>

            <div style="padding: 128px 24px; text-align: center;">
                <h2 style="font-size: 32px; margin-bottom: 48px;">Connect_Protocol</h2>
                <div style="display: flex; flex-direction: column; gap: 16px; align-items: center;">
                    <a href="https://linkedin.com"
                        style="color: var(--text-secondary); text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                        <i data-lucide="linkedin" style="width: 16px; height: 16px;"></i> LINKEDIN
                    </a>
                    <a href="https://twitter.com"
                        style="color: var(--text-secondary); text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                        <i data-lucide="twitter" style="width: 16px; height: 16px;"></i> TWITTER/X
                    </a>
                    <a href="https://github.com"
                        style="color: var(--text-secondary); text-decoration: none; display: inline-flex; align-items: center; gap: 8px;">
                        <i data-lucide="github" style="width: 16px; height: 16px;"></i> GITHUB
                    </a>
                </div>
            </div>
        </section>

        <!-- CATEGORY PAGE -->
        <section id="category-page" class="page-section" style="padding: 128px 24px 64px 24px;">
            <div style="max-width: 1200px; margin: 0 auto;">
                <a href="#" onclick="showPage('home')" class="back-link">
                    <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i>
                    Back to Categories
                </a>

                <div style="margin-bottom: 64px;">
                    <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;" id="cat-id"></div>
                    <h1 style="font-size: 48px; margin-bottom: 16px;" id="cat-title"></h1>
                    <p style="font-size: 16px; color: var(--text-secondary);" id="cat-desc"></p>
                </div>

                <div id="articles-container"></div>
            </div>
        </section>

        <!-- ARTICLE PAGE -->
        <section id="article-page" class="page-section" style="padding: 128px 24px;">
            <div style="max-width: 1000px; margin: 0 auto;">
                <a href="#" onclick="showCategory(currentCategory)" class="back-link">
                    <i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i>
                    Back to Articles
                </a>

                <div style="border-bottom: 1px solid var(--border-default); padding-bottom: 32px; margin-bottom: 48px;">
                    <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 16px;" id="art-meta">
                    </div>
                    <h1 style="font-size: 48px; margin-bottom: 16px;" id="art-title"></h1>
                    <div id="art-tags"></div>
                </div>

                <div style="font-size: 15px; line-height: 1.8; color: var(--text-secondary);" id="art-content"></div>
            </div>
        </section>

        <!-- ADMIN PAGE -->
        <section id="admin-page" class="page-section" style="padding: 128px 24px;">
            <div style="max-width: 1000px; margin: 0 auto;">
                <div id="admin-login">
                    <h1 style="font-size: 36px; margin-bottom: 32px;">Admin_Access</h1>
                    <div style="max-width: 400px;">
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" id="admin-password">
                        </div>
                        <button class="btn btn-primary" onclick="adminLogin()">Login</button>
                        <button class="btn" onclick="showPage('home')" style="margin-left: 12px;">Cancel</button>
                    </div>
                </div>

                <div id="admin-dashboard" style="display: none;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 32px;">
                        <h1 style="font-size: 36px;">Content_Manager</h1>
                        <button class="btn" onclick="adminLogout()">Logout</button>
                    </div>

                    <div class="form-group">
                        <label>Category</label>
                        <select id="admin-category" onchange="loadAdminArticles()">
                            <option value="equity_research">Equity Research</option>
                            <option value="business_cases">Business Cases</option>
                            <option value="branding_strategies">Branding Strategies</option>
                            <option value="psychology">Psychology</option>
                            <option value="tennis">Tennis</option>
                            <option value="cars">Luxury Cars</option>
                            <option value="communication">Communication</option>
                            <option value="company_research">Company Research</option>
                        </select>
                    </div>

                    <div
                        style="background: var(--bg-surface); border: 1px solid var(--border-default); padding: 32px; margin-bottom: 48px;">
                        <h2 style="font-size: 24px; margin-bottom: 24px;">Add New Article</h2>
                        <form onsubmit="event.preventDefault(); saveArticle();">
                            <input type="hidden" id="edit-id">
                            <div class="form-group">
                                <label>Title</label>
                                <input type="text" id="edit-title" required>
                            </div>
                            <div class="form-group">
                                <label>Company/Brand (optional)</label>
                                <input type="text" id="edit-company">
                            </div>
                            <div class="form-group">
                                <label>Tags (comma separated)</label>
                                <input type="text" id="edit-tags">
                            </div>
                            <div class="form-group">
                                <label>Content</label>
                                <textarea id="edit-content" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Save Article</button>
                            <button type="button" class="btn" onclick="resetForm()"
                                style="margin-left: 12px;">Clear</button>
                        </form>
                    </div>

                    <h2 style="font-size: 24px; margin-bottom: 24px;">Existing Articles</h2>
                    <div id="admin-articles-list"></div>
                </div>
            </div>
        </section>
    </div>

    <script>
        lucide.createIcons();

        // ============================================
        // GEOMETRIC CONSTELLATION MOVEMENT
        // ============================================
        const canvas = document.getElementById('constellation-canvas');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        let nodes = [];
        let dataStreams = [];
        let mouse = { x: null, y: null };
        let currentPage = 'home';
        let time = 0;

        const MOUSE_INFLUENCE = 250;
        const SUBTLE_GREEN = '0, 204, 102';
        const ACCENT_GREEN = '0, 153, 85';

        window.addEventListener('resize', () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initNodes(); // Reinitialize on resize
        });

        window.addEventListener('mousemove', (e) => {
            mouse.x = e.clientX;
            mouse.y = e.clientY;
        });

        window.addEventListener('mouseleave', () => {
            mouse.x = null;
            mouse.y = null;
        });

        class Node {
            constructor(index, total) {
                // GEOMETRIC BASE POSITION
                this.baseX = Math.random() * width;
                this.baseY = Math.random() * height;

                // GEOMETRIC MOVEMENT PARAMETERS
                this.index = index;
                this.total = total;

                // Wave parameters (each node on different phase)
                this.waveAmplitudeX = 30 + Math.random() * 40;
                this.waveAmplitudeY = 30 + Math.random() * 40;
                this.waveFrequencyX = 0.001 + Math.random() * 0.002;
                this.waveFrequencyY = 0.001 + Math.random() * 0.002;
                this.phaseOffsetX = (Math.PI * 2 * index) / total;
                this.phaseOffsetY = (Math.PI * 2 * index) / total + Math.PI / 4;

                // Circular orbit parameters
                this.orbitRadius = 20 + Math.random() * 30;
                this.orbitSpeed = 0.001 + Math.random() * 0.001;
                this.orbitPhase = (Math.PI * 2 * index) / total;

                this.size = Math.random() * 1.5 + 0.5;
                this.pulse = Math.random() * Math.PI * 2;
                this.pulseSpeed = 0.02 + Math.random() * 0.02;
                this.energy = Math.random();

                // Current position
                this.x = this.baseX;
                this.y = this.baseY;

                // Mouse influence offset
                this.mouseOffsetX = 0;
                this.mouseOffsetY = 0;
            }

            update(globalTime) {
                // PERFECT GEOMETRIC WAVE MOTION
                const waveX = Math.sin(globalTime * this.waveFrequencyX + this.phaseOffsetX) * this.waveAmplitudeX;
                const waveY = Math.cos(globalTime * this.waveFrequencyY + this.phaseOffsetY) * this.waveAmplitudeY;

                // CIRCULAR ORBIT OVERLAY
                const orbitAngle = globalTime * this.orbitSpeed + this.orbitPhase;
                const orbitX = Math.cos(orbitAngle) * this.orbitRadius;
                const orbitY = Math.sin(orbitAngle) * this.orbitRadius;

                // COMBINE GEOMETRIC MOTIONS
                this.x = this.baseX + waveX + orbitX + this.mouseOffsetX;
                this.y = this.baseY + waveY + orbitY + this.mouseOffsetY;

                // INTERACTIVE MOUSE REPULSION
                if (mouse.x !== null && mouse.y !== null) {
                    const dx = this.x - mouse.x;
                    const dy = this.y - mouse.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < MOUSE_INFLUENCE) {
                        const force = (MOUSE_INFLUENCE - distance) / MOUSE_INFLUENCE;
                        const angle = Math.atan2(dy, dx);
                        this.mouseOffsetX += Math.cos(angle) * force * 3;
                        this.mouseOffsetY += Math.sin(angle) * force * 3;
                    }
                }

                // Smooth return to geometric path
                this.mouseOffsetX *= 0.95;
                this.mouseOffsetY *= 0.95;

                // Pulsing animation
                this.pulse += this.pulseSpeed;
                this.energy = 0.3 + Math.sin(this.pulse) * 0.3;
            }

            draw() {
                const intensity = currentPage === 'home' ? 1 : 0.6;
                const glowIntensity = (0.5 + this.energy * 0.4) * intensity;

                ctx.shadowBlur = currentPage === 'home' ? 12 : 8;
                ctx.shadowColor = `rgba(${SUBTLE_GREEN}, ${glowIntensity * 0.4})`;

                ctx.fillStyle = `rgba(${SUBTLE_GREEN}, ${glowIntensity * 0.8})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();

                ctx.shadowBlur = 0;
                ctx.fillStyle = `rgba(200, 255, 200, ${glowIntensity * 0.6})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size * 0.4, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        class DataStream {
            constructor(start, end) {
                this.start = start;
                this.end = end;
                this.progress = 0;
                this.speed = 0.01 + Math.random() * 0.02;
                this.life = 1;
            }

            update() {
                this.progress += this.speed;
                if (this.progress > 1) {
                    this.life -= 0.05;
                }
            }

            draw() {
                if (this.life <= 0) return;

                const x = this.start.x + (this.end.x - this.start.x) * this.progress;
                const y = this.start.y + (this.end.y - this.start.y) * this.progress;

                const gradient = ctx.createRadialGradient(x, y, 0, x, y, 3);
                gradient.addColorStop(0, `rgba(${SUBTLE_GREEN}, ${this.life * 0.7})`);
                gradient.addColorStop(1, `rgba(${SUBTLE_GREEN}, 0)`);

                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 2, 0, Math.PI * 2);
                ctx.fill();
            }

            isDead() {
                return this.life <= 0;
            }
        }

        function initNodes() {
            nodes = [];
            const nodeCount = currentPage === 'home' ? 150 : 60;
            for (let i = 0; i < nodeCount; i++) {
                nodes.push(new Node(i, nodeCount));
            }
        }

        initNodes();

        function findConnections() {
            const connections = [];
            const connectionDist = currentPage === 'home' ? 180 : 200;

            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    const dx = nodes[i].x - nodes[j].x;
                    const dy = nodes[i].y - nodes[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < connectionDist) {
                        connections.push({
                            a: nodes[i],
                            b: nodes[j],
                            distance: distance
                        });
                    }
                }
            }

            return connections;
        }

        let streamSpawnTimer = 0;

        function animate() {
            ctx.clearRect(0, 0, width, height);

            // INCREMENT GLOBAL TIME FOR SYNCHRONIZED GEOMETRIC MOTION
            time++;

            // Update all nodes with synchronized time
            nodes.forEach(node => {
                node.update(time);
            });

            // Draw connections
            const connections = findConnections();
            const connectionDist = currentPage === 'home' ? 180 : 200;

            connections.forEach(conn => {
                const baseOpacity = currentPage === 'home' ? 0.25 : 0.15;
                const opacity = (1 - conn.distance / connectionDist) * baseOpacity;
                const gradient = ctx.createLinearGradient(
                    conn.a.x, conn.a.y,
                    conn.b.x, conn.b.y
                );

                gradient.addColorStop(0, `rgba(${SUBTLE_GREEN}, ${opacity * conn.a.energy * 1.2})`);
                gradient.addColorStop(0.5, `rgba(${ACCENT_GREEN}, ${opacity * 0.7})`);
                gradient.addColorStop(1, `rgba(${SUBTLE_GREEN}, ${opacity * conn.b.energy * 1.2})`);

                ctx.strokeStyle = gradient;
                ctx.lineWidth = currentPage === 'home' ? 0.8 : 0.5;
                ctx.beginPath();
                ctx.moveTo(conn.a.x, conn.a.y);
                ctx.lineTo(conn.b.x, conn.b.y);
                ctx.stroke();
            });

            // Data streams
            streamSpawnTimer++;
            const maxStreams = currentPage === 'home' ? 15 : 8;
            if (streamSpawnTimer > 30 && connections.length > 0 && dataStreams.length < maxStreams) {
                const randomConnection = connections[Math.floor(Math.random() * connections.length)];
                dataStreams.push(new DataStream(randomConnection.a, randomConnection.b));
                streamSpawnTimer = 0;
            }

            dataStreams = dataStreams.filter(stream => !stream.isDead());
            dataStreams.forEach(stream => {
                stream.update();
                stream.draw();
            });

            // Draw nodes
            nodes.forEach(node => {
                node.draw();
            });

            requestAnimationFrame(animate);
        }

        animate();

        // ============================================
        // PAGE NAVIGATION & DATA
        // ============================================
        let currentCategory = '';
        let currentArticleId = null;

        function showPage(page) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
            document.getElementById(page + '-page').classList.add('active');
            window.scrollTo(0, 0);
            lucide.createIcons();

            currentPage = page;
            if (page === 'home') {
                if (nodes.length < 100) {
                    initNodes();
                }
            }
        }

        const CATEGORIES = {
            equity_research: { id: '001', name: 'Equity Research', desc: 'Investment frameworks, valuation models, and stock analysis methodologies from legendary investors.' },
            business_cases: { id: '002', name: 'Interesting Business Cases', desc: 'Strategic analysis of companies that disrupted industries, built competitive moats, and created lasting value.' },
            branding_strategies: { id: '003', name: 'Branding Strategies', desc: 'Brand positioning, identity architecture, and marketing strategies from world-class brands.' },
            psychology: { id: '004', name: 'Psychology Research', desc: 'Behavioral economics, cognitive biases, and decision-making frameworks that influence markets.' },
            tennis: { id: '005', name: 'Tennis', desc: 'Match analysis, player strategies, technique breakdowns, and insights from professional tennis.' },
            cars: { id: '006', name: 'Luxury Cars', desc: 'Automotive design philosophy, engineering excellence, and business strategies of luxury manufacturers.' },
            communication: { id: '007', name: 'Communication Research', desc: 'Rhetoric, persuasion techniques, and mass media influence strategies in modern communication.' },
            company_research: { id: '008', name: 'Company Research', desc: 'Corporate strategy analysis, operational excellence, and business model innovation across industries.' }
        };

        function initData() {
            if (!localStorage.getItem('equity_research')) {
                const sampleArticle = {
                    id: Date.now(),
                    title: 'Warren Buffett Investment Framework',
                    company: 'Berkshire Hathaway',
                    tags: 'Value Investing, Moat Analysis, Capital Allocation',
                    content: `The Oracle of Omaha's systematic approach to identifying compounding machines.

## Business Quality Filter

Look for durable competitive advantages:
- Brand power (Coca-Cola, Apple)
- Network effects (Visa, Mastercard)
- Cost leadership (Costco, GEICO)
- Regulatory barriers (utilities)

## Management Evaluation

Assess capital allocation track record and owner orientation. Read 10+ years of annual letters for consistency.

## Valuation Framework

Calculate Owner Earnings = Net Income + D&A - CapEx - Working Capital Changes. Apply 8-10% discount rate and require 30-50% margin of safety.`,
                    date: new Date().toISOString()
                };
                localStorage.setItem('equity_research', JSON.stringify([sampleArticle]));
            }

            if (!localStorage.getItem('business_cases')) {
                const sampleArticle = {
                    id: Date.now() + 1,
                    title: 'Apple Ecosystem Strategy',
                    company: 'Apple Inc.',
                    tags: 'Platform, Ecosystem, Vertical Integration',
                    content: `How Apple built unprecedented customer loyalty through ecosystem lock-in.

## Hardware-Software Integration

Seamless experience across devices (iPhone, iPad, Mac, Apple Watch, AirPods). iCloud syncing creates frictionless multi-device usage.

## Services Revenue Model

- App Store: 30% commission on $1.1T+ app economy
- Services grew from $19B (2016) to $78B (2022)
- Gross margins on services: 70%+ vs 35% on hardware

## Switching Costs

Difficult to leave once invested in multiple products. Loss of iMessage, FaceTime exclusivity, and need to repurchase apps creates multi-user lock-in.`,
                    date: new Date().toISOString()
                };
                localStorage.setItem('business_cases', JSON.stringify([sampleArticle]));
            }
        }

        initData();

        function showCategory(categoryKey) {
            currentCategory = categoryKey;
            currentPage = 'category';
            const cat = CATEGORIES[categoryKey];

            document.getElementById('cat-id').textContent = cat.id;
            document.getElementById('cat-title').textContent = cat.name;
            document.getElementById('cat-desc').textContent = cat.desc;

            const articles = JSON.parse(localStorage.getItem(categoryKey) || '[]');
            const container = document.getElementById('articles-container');

            if (articles.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 64px;">No articles yet. Use admin panel to add content.</p>';
            } else {
                container.innerHTML = articles.map(article => `
                    <div class="article-card" onclick="showArticle(${article.id})">
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 12px;">
                            ${article.company || ''} ${article.company ? '•' : ''} ${new Date(article.date).toLocaleDateString()}
                        </div>
                        <h2 class="article-title">${article.title}</h2>
                        <p style="color: var(--text-secondary); font-size: 14px; margin-bottom: 16px;">
                            ${article.content.substring(0, 200)}...
                        </p>
                        <div>
                            ${article.tags ? article.tags.split(',').map(t => `<span class="tag">${t.trim()}</span>`).join('') : ''}
                        </div>
                    </div>
                `).join('');
            }

            showPage('category');
        }

        function showArticle(articleId) {
            currentArticleId = articleId;
            currentPage = 'article';
            const articles = JSON.parse(localStorage.getItem(currentCategory) || '[]');
            const article = articles.find(a => a.id === articleId);

            if (!article) return;

            document.getElementById('art-meta').innerHTML = `${article.company || ''} ${article.company ? '•' : ''} ${new Date(article.date).toLocaleDateString()}`;
            document.getElementById('art-title').textContent = article.title;
            document.getElementById('art-tags').innerHTML = article.tags ? article.tags.split(',').map(t => `<span class="tag">${t.trim()}</span>`).join('') : '';

            let formatted = article.content
                .replace(/## (.+)/g, '<h2 style="color: var(--accent-primary); font-size: 24px; margin: 32px 0 16px 0;">$1</h2>')
                .replace(/### (.+)/g, '<h3 style="color: var(--text-primary); font-size: 18px; margin: 24px 0 12px 0;">$1</h3>')
                .replace(/\*\*(.+?)\*\*/g, '<strong style="color: var(--text-primary);">$1</strong>')
                .replace(/^- (.+)$/gm, '<li style="margin-left: 24px;">$1</li>')
                .replace(/\n\n/g, '</p><p style="margin-bottom: 24px;">');

            document.getElementById('art-content').innerHTML = '<p style="margin-bottom: 24px;">' + formatted + '</p>';

            showPage('article');
        }

        const ADMIN_PASSWORD = 'vektani2026';

        function adminLogin() {
            if (document.getElementById('admin-password').value === ADMIN_PASSWORD) {
                localStorage.setItem('admin_auth', 'true');
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-dashboard').style.display = 'block';
                loadAdminArticles();
            } else {
                alert('Invalid password');
            }
        }

        function adminLogout() {
            localStorage.removeItem('admin_auth');
            document.getElementById('admin-login').style.display = 'block';
            document.getElementById('admin-dashboard').style.display = 'none';
            showPage('home');
        }

        if (localStorage.getItem('admin_auth') === 'true') {
            document.getElementById('admin-login').style.display = 'none';
            document.getElementById('admin-dashboard').style.display = 'block';
        }

        function loadAdminArticles() {
            const category = document.getElementById('admin-category').value;
            const articles = JSON.parse(localStorage.getItem(category) || '[]');
            const container = document.getElementById('admin-articles-list');

            if (articles.length === 0) {
                container.innerHTML = '<p style="color: var(--text-secondary); text-align: center; padding: 32px;">No articles yet.</p>';
            } else {
                container.innerHTML = articles.map(article => `
                    <div style="background: var(--bg-surface); border: 1px solid var(--border-default); padding: 24px; margin-bottom: 16px;">
                        <div style="font-size: 18px; margin-bottom: 8px;">${article.title}</div>
                        <div style="color: var(--text-secondary); font-size: 12px; margin-bottom: 16px;">
                            ${article.company || ''} • ${new Date(article.date).toLocaleDateString()}
                        </div>
                        <button class="btn" onclick='editArticle(${JSON.stringify(article).replace(/'/g, "\'")},"${category}")'>Edit</button>
                        <button class="btn" onclick="deleteArticle(${article.id},'${category}')" style="margin-left: 12px;">Delete</button>
                    </div>
                `).join('');
            }
        }

        function saveArticle() {
            const category = document.getElementById('admin-category').value;
            const articles = JSON.parse(localStorage.getItem(category) || '[]');
            const editId = document.getElementById('edit-id').value;

            const article = {
                id: editId ? parseInt(editId) : Date.now(),
                title: document.getElementById('edit-title').value,
                company: document.getElementById('edit-company').value,
                tags: document.getElementById('edit-tags').value,
                content: document.getElementById('edit-content').value,
                date: new Date().toISOString()
            };

            if (editId) {
                const index = articles.findIndex(a => a.id === parseInt(editId));
                articles[index] = article;
            } else {
                articles.unshift(article);
            }

            localStorage.setItem(category, JSON.stringify(articles));
            resetForm();
            loadAdminArticles();
            alert('Article saved!');
        }

        function editArticle(article, category) {
            document.getElementById('admin-category').value = category;
            document.getElementById('edit-id').value = article.id;
            document.getElementById('edit-title').value = article.title;
            document.getElementById('edit-company').value = article.company || '';
            document.getElementById('edit-tags').value = article.tags || '';
            document.getElementById('edit-content').value = article.content;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function deleteArticle(id, category) {
            if (!confirm('Delete this article?')) return;
            let articles = JSON.parse(localStorage.getItem(category) || '[]');
            articles = articles.filter(a => a.id !== id);
            localStorage.setItem(category, JSON.stringify(articles));
            loadAdminArticles();
        }

        function resetForm() {
            document.getElementById('edit-id').value = '';
            document.getElementById('edit-title').value = '';
            document.getElementById('edit-company').value = '';
            document.getElementById('edit-tags').value = '';
            document.getElementById('edit-content').value = '';
        }

        const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
        const heroTitle = document.querySelector('.hero-title');
        if (heroTitle) {
            const originalText = heroTitle.innerText;
            let iterations = 0;
            const interval = setInterval(() => {
                heroTitle.innerText = originalText.split("").map((letter, index) => {
                    if (index < iterations) return originalText[index];
                    return letters[Math.floor(Math.random() * letters.length)];
                }).join("");
                if (iterations >= originalText.length) clearInterval(interval);
                iterations += 1 / 2;
            }, 30);
        }
    </script>
</body>

</html>